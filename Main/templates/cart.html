{% extends 'base.html' %}
{% load static %}
{% block content %}
<style>
	
:root {
  --white: #fff;
  --black: #222;
  --green: #6cbe02;
  --grey1: #f0f0f0;
  --grey2: #e9d7d3;
}

a {
  text-decoration: none;
  color: var(--black);
}

.cart {
  margin: 10rem auto;
}

table {
  width: 100%;
  border-collapse: collapse;
}

.cart-info {
  display: flex;
  flex-wrap: wrap;
}

th {
  text-align: left;
  padding: 0.5rem;
  color: #fff;
  background-color: var(--green);
  font-weight: normal;
}

td {
  padding: 1rem 0.5rem;
}

td input {
  width: 5rem;
  height: 3rem;
  padding: 0.5rem;
}

td a {
  color: orangered;
  font-size: 1.4rem;
}

td img {
  width: 8rem;
  height: 8rem;
  margin-right: 1rem;
}

.total-price {
  display: flex;
  align-items: flex-end;
  flex-direction: column;
  margin-top: 2rem;
}

.total-price table {
  border-top: 3px solid var(--green);
  width: 100%;
  max-width: 35rem;
}

td:last-child {
  text-align: right;
}

th:last-child {
  text-align: right;
}

.checkout {
  display: inline-block;
  background-color: var(--green);
  color: white;
  padding: 1rem;
  margin-top: 1rem;
}

@media only screen and (max-width: 567px) {
  .cart-info p {
    display: none;
  }
}

</style>
<main class="container my-4" id="cartList">
	
	<h3 class="my-4 border-bottom pb-1">Cart ({{totalitems}})</h3>
	{% if totalitems %}
	<div class="cart">
		<table>
			<tr>
				<th>Product</th>
				<th>Quantity</th>
				<th>Subtotal</th>
			  </tr>
			  {% for product_id,item in cart_data.items %}
			  <tr>
				<td>
				  <div class="cart-info">
					<a href="/product/{{item.title|slugify}}/{{product_id}}"><img src="/media/{{item.image}}" alt="{{item.title}}" /></a>
					<div>
						<a href="/product/{{item.title|slugify}}/{{product_id}}"><p>{{item.title}}</p></a>
					  <span>Price: {{item.price}}</span> <br />
					</div>
				  </div>
				</td>
				<td>
					<div class="cart-info">
						<input type="number" min="1" class="product-qty-{{product_id}} m-1" value="{{item.qty}}"  />
						<button class="btn btn-sm btn-primary update-item m-1" data-item="{{product_id}}"><i class="fa fa-sync"></i></button>
						<button class="btn btn-sm btn-danger delete-item m-1" data-item="{{product_id}}"><i class="fa fa-trash"></i></button>
					</div>
					
				</td>
				<td>{% widthratio item.price 1 item.qty %}</td>
			  </tr>
			  {% endfor %}
		</table>
		<div class="total-price">
			<table>
				<td>Total</td>
				<td>BDT {{total_amt}}</td>
			  </tr>
			</table>
			{% if totalitems %}
			<a href="{% url 'checkout' %}" class="checkout btn">Checkout <i class="fa fa-long-arrow-alt-right"></i></a>
			{% endif %}
		  </div>
	</div>
	{% else %}
	<div class="container m-10">
		<div class="my-5"></div>
		<div class="my-5"></div>
		<div class="my-5"></div>
		<h2 class="text-center">Your cart is currently empty.</h2>
		<div class="my-5"></div>
		<p class="text-center ">Before proceed to checkout you must add some products to your shopping cart.
			You will find a lot of interesting products on our Shop.</p>
		<div class="my-5"></div>
		<p class="text-center"><a href="{% url 'product-list' %}" class="btn btn-dark btn-sm">Return to shop </a></p>
		<div class="my-5"></div>
		<div class="my-5"></div>
		<div class="my-5"></div>
	</div>
	{% endif %}
</main>
{% endblock %}